<!DOCTYPE html>
<html>
	<head>
		<title></title>
		
		<link rel="stylesheet" type="text/css" href="./style.css">
		
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.3/vue.js"></script>
	</head>

	<body>
		<div id="app">
			<ul>
				<li 
					is="todo-list-item"
					v-for="list in sharedState.todoLists"
					v-bind:todo-list="list"
					v-on:edit:todolist="editTodoList"
					v-on:add:todo="addTodo"
					v-on:edit:todo="editTodo"
				>
				</li>
			</ul>
			

			<create-todo-list 
				v-on:create:todolist="createTodoList"
			>
			</create-todo-list>
			
		</div>
		
		<script type="text/x-template" id="todo-list-item-template">
			<div>
				<transition-group name="component-fade" mode="in-out">
					<todo-list-summary 
						v-if="!mode.edit" 
						v-bind:todo-list="todoList" 
						v-bind:key="todoList._id"
					>
					</todo-list-summary>
					
					

					<edit-todo-list 
						v-if="mode.edit" 
						v-bind:todo-list="todoList" 
						v-bind:key="todoList._id"
						v-on:edit:todolist="editTodoList"
					>
					</edit-todo-list>
				</transition-group>

				<button 
					v-bind:key="todoList._id"
					v-on:click="mode.edit = !mode.edit" 
				>
					{{ editMode }}
				</button>
				<button 
					v-bind:key="todoList._id"
					v-on:click="mode.detail = !mode.detail" 
				>
					{{ detailMode }}
				</button>
				

				<transition-group name="component-fade" mode="in-out">
					<add-todo 
						v-if="mode.detail"
						v-bind:todo-list="todoList"
						v-bind:key="todoList._id"
						v-on:add:todo="addTodo"
					>
					</add-todo>

					<ul 
						v-if="mode.detail"
						v-bind:key="todoList._id"
					>
						<li 
							is="todo-item"
							v-for="todo in todoList.todos"
							v-bind:todo-list="todoList"
							v-bind:todo="todo"
							v-bind:key="todo._id"
							v-on:add:todo="addTodo"
							v-on:edit:todo="editTodo"
						>
						
						</li>
					
					</ul>
				
				</transition-group>	
			</div>

		</script>

		<script type="text/x-template" id="todo-item-template">
			<div>
				<todo-summary 
					v-if="!mode.edit"
					v-bind:todo="todo"
				>
				</todo-summary>

				<edit-todo 
					v-if="mode.edit"
					v-bind:todo-list="todoList" 
					v-bind:todo="todo"
					v-on:edit:todo="editTodo"
				>
				</edit-todo>
				<button 
					v-bind:key="todoList._id"
					v-on:click="mode.edit = !mode.edit" 
				>
					{{ editMode }}
				</button>
			
			</div>

		</script>

		<script type="text/x-template" id="todo-list-summary-template">
			<div>
				<p>Name: {{todoList.name}}</p> <p>Description: {{todoList.description}}</p>
			</div>
		</script>
		<script type="text/x-template" id="create-todo-list-template">
			<form v-on:submit.prevent="createTodoList($event, name, description)">
				<label> Name:
					<input type="text" name="name" v-model="name">
				</label>
				<label>	Description:
					<input type="text" name="description" v-model="description">
				</label>	
					<button type="submit">Create Todo List</button>
					
			</form>
		</script>
		<script type="text/x-template" id="edit-todo-list-template">
			<form v-on:submit.prevent="editTodoList($event, name, description)">
				<label> Name:
					<input type="text" name="name" v-model="name">
				</label>
				<label>	Description:
					<input type="text" name="description" v-model="description">
				</label>	
					<button type="submit">Edit Todo List</button>
					
			</form>
		</script>
		<script type="text/x-template" id="todo-summary-template">
			<div>
				<p>Todo-Name: {{todo.name}}</p> <p>Todo-Description: {{todo.description}}</p>
			</div>
		</script>
		<script type="text/x-template" id="add-todo-template">
			<form v-on:submit.prevent="addTodo($event, name, description)">
				<label> Name:
					<input type="text" name="name" v-model="name">
				</label>
				<label>	Description:
					<input type="text" name="description" v-model="description">
				</label>	
					<button type="submit">Add Todo</button>
					
			</form>		
		</script>
		<script type="text/x-template" id="edit-todo-template">
			<form v-on:submit.prevent="editTodo($event, name, description)">
				<label> Name:
					<input type="text" name="name" v-model="name">
				</label>
				<label>	Description:
					<input type="text" name="description" v-model="description">
				</label>	
					<button type="submit">Edit Todo </button>
			</form>		
		</script>



		<script type="text/javascript" src="./components.js"></script>
		<script type="text/javascript" src="./store.js"></script>
		<script type="text/javascript" src="./main.js"></script>
	</body>
</html>